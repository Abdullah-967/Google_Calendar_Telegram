# بوت تيليجرام لتقويم جوجل - تدفق عمل n8n

مساعد جدولة ذكي يدير تقويم جوجل الخاص بك من خلال المحادثة الطبيعية عبر تيليجرام، مدعوم بالذكاء الاصطناعي وأتمتة n8n.

## 🤖 ماذا يفعل

**مخطط المهام** هو بوت تيليجرام مدعوم بالذكاء الاصطناعي يعمل كمساعد جدولة شخصي. ببساطة تحدث معه بشكل طبيعي من أجل:

- 📅 **جدولة المواعيد** - "احجز اجتماع فريق غداً في الساعة 2 مساءً"
- 🔍 **فحص التوفر** - "ما الموجود في تقويمي اليوم؟"
- ✏️ **تحديث المواعيد** - "انقل مكالمتي في 3 مساءً إلى 4 مساءً"
- 🗑️ **حذف المواعيد** - "ألغِ موعد الغداء الخاص بي"
- 🎤 **أوامر صوتية** - أرسل رسائل صوتية للجدولة بدون استخدام اليدين
- 🤝 **حل التعارضات** - يكتشف التداخلات تلقائياً ويقترح بدائل

## 🚀 الميزات الرئيسية

### إدخال متعدد الوسائط
- **الرسائل النصية**: اكتب طلبات الجدولة بشكل طبيعي
- **الرسائل الصوتية**: تحدث بطلباتك واحصل على النسخ التلقائي عبر جوجل جيميني

### إدارة التقويم الذكية
- **كشف التعارضات**: يفحص تلقائياً تعارضات الجدولة
- **اقتراحات ذكية**: يقترح أوقاتاً بديلة عند وجود تعارضات
- **عمليات CRUD شاملة**: إنشاء وقراءة وتحديث وحذف أحداث التقويم
- **وعي بالمناطق الزمنية**: يتعامل مع تحويلات المناطق الزمنية (الافتراضي: أوروبا/أمستردام)

### ذكاء اصطناعي محادثي
- **معالجة اللغة الطبيعية**: يفهم طلبات الجدولة غير الرسمية
- **ذاكرة السياق**: يتذكر تاريخ المحادثة للتفاعلات السلسة
- **سير عمل التأكيد**: يؤكد دائماً قبل إجراء تغييرات التقويم
- **افتراضات ذكية**: مدة ساعة واحدة، تنسيق مناسب، والمزيد

## 🏗️ البنية المعمارية

يتكون تدفق عمل n8n هذا من عدة عقد مترابطة:

### المكونات الأساسية
- **محفز تيليجرام**: يستمع للرسائل الواردة والمذكرات الصوتية
- **وكيل الذكاء الاصطناعي**: ذكاء اصطناعي محادثي مدعوم بجوجل جيميني مع قدرات إدارة التقويم
- **معالجة الصوت**: نسخ تلقائي باستخدام جوجل جيميني للرسائل الصوتية
- **نظام الذاكرة**: يحافظ على سياق المحادثة لكل مستخدم

### تكامل التقويم
- **MCP (بروتوكول سياق النموذج)**: تكامل أدوات التقويم المتقدمة
- **أدوات تقويم جوجل**: تكامل مباشر مع API للعمليات التقويمية
  - إنشاء أحداث
  - الحصول على أحداث (واحد/متعدد)
  - تحديث أحداث
  - حذف أحداث

### التوجيه الذكي
- **كشف نوع الرسالة**: يوجه تلقائياً الرسائل النصية مقابل الصوتية
- **معالجة الإدخال**: يوحد أنواع الإدخال المختلفة لوكيل الذكاء الاصطناعي

## 📋 المتطلبات الأساسية

### الحسابات وواجهات برمجة التطبيقات المطلوبة
1. **مثيل n8n Cloud أو مستضاف ذاتياً**
2. **رمز بوت تيليجرام**
   - أنشئ بوتاً عبر [@BotFather](https://t.me/botfather)
   - احصل على رمز البوت الخاص بك
3. **واجهة برمجة تطبيقات تقويم جوجل**
   - بيانات اعتماد OAuth2 للوصول للتقويم
4. **واجهة برمجة تطبيقات جوجل جيميني**
   - لمعالجة الذكاء الاصطناعي ونسخ الصوت

### بيانات الاعتماد المطلوبة في n8n
- **واجهة برمجة تطبيقات تيليجرام**: أنشئ بيانات اعتماد برمز البوت الخاص بك
- **OAuth2 تقويم جوجل**: أنشئ بيانات اعتماد بوصول OAuth2 لتقويم جوجل الخاص بك
- **واجهة برمجة تطبيقات جوجل جيميني**: أنشئ بيانات اعتماد بمفتاح API جوجل جيميني الخاص بك

## 🛠️ تعليمات الإعداد

### 1. استيراد تدفق العمل
- حمّل ملف `Google_Calendar_Telegram.json`
- استورده في مثيل n8n الخاص بك
- فعّل تدفق العمل

### 2. تكوين بيانات الاعتماد
أعد تكوين بيانات الاعتماد التالية في n8n:
- **واجهة برمجة تطبيقات تيليجرام**: أضف رمز البوت الخاص بك
- **OAuth2 تقويم جوجل**: اسمح بالوصول للتقويم
- **واجهة برمجة تطبيقات جوجل جيميني**: أضف مفتاح API الخاص بك

### 3. تحديث إعدادات التقويم
- **مهم جداً**: استبدل البريد الإلكتروني للتقويم في جميع عقد تقويم جوجل بعنوان بريدك الإلكتروني
- انتقل إلى كل عقدة تقويم جوجل في تدفق العمل
- حدّث حقل التقويم إلى البريد الإلكتروني الرئيسي لتقويم جوجل الخاص بك
- هذا يضمن أن البوت يدير تقويمك أنت، وليس التقويم النموذجي

### 4. تكوين خادم MCP
- **ملاحظة أمنية**: يتضمن تدفق العمل نقطة نهاية خادم MCP يجب استبدالها
- حدّث عقدة أداة عميل MCP بنقطة نهاية خادم MCP الخاصة بك
- **لا تستخدم نقطة النهاية النموذجية** - أعد إعداد خادم MCP الخاص بك للأمان
- راجع وثائق n8n MCP لتعليمات إعداد الخادم

## 💬 أمثلة على الاستخدام

### الجدولة الأساسية
```
"اجدول موعد طبيب أسنان غداً في العاشرة صباحاً"
"احجز غداءً مع سارة يوم الجمعة في الظهر"
"أعد اجتماع وقوف فريق كل يوم اثنين في التاسعة صباحاً"
```

### فحص التقويم
```
"ما الموجود في تقويمي اليوم؟"
"أرني اجتماعاتي غداً"
"هل لدي أي شيء في الساعة 3 مساءً؟"
```

### التعديلات
```
"انقل اجتماعي في الساعة 2 مساءً إلى 3 مساءً"
"ألغِ موعد الغداء الخاص بي"
"حدّث مكالمة العميل لتشمل رابط الفيديو"
```

### الأوامر الصوتية
ببساطة أرسل رسالة صوتية بأي من الطلبات المذكورة أعلاه للتشغيل بدون استخدام اليدين.

## 🎯 منطق تدفق العمل

1. **استقبال الرسالة**: محفز تيليجرام يلتقط الرسائل الواردة
2. **توجيه الإدخال**: عقدة التبديل تحدد ما إذا كان نص أم صوت
3. **معالجة الصوت**: إذا كان صوتاً، تحميل ← نسخ ← توحيد
4. **معالجة الذكاء الاصطناعي**: وكيل جيميني يعالج الطلب مع سياق التقويم
5. **عمليات التقويم**: ينفذ إجراءات التقويم المناسبة عبر MCP/API
6. **الاستجابة**: يرسل استجابة منسقة مرة أخرى إلى تيليجرام

## 🔧 خيارات التخصيص

### تكوين المنطقة الزمنية
- المنطقة الزمنية الافتراضية: `أوروبا/أمستردام`
- عدّل في رسالة النظام لوكيل الذكاء الاصطناعي

### لغة الاستجابة
- حالياً مكوّن للإنجليزية
- عدّل محث وكيل الذكاء الاصطناعي للغات أخرى

### مدة الحدث الافتراضية
- حالياً: ساعة واحدة
- قابل للتعديل في رسالة النظام لوكيل الذكاء الاصطناعي

### اختيار التقويم
- **مطلوب**: حدّث جميع عناوين البريد الإلكتروني للتقويم في عقد تقويم جوجل بعنوان بريدك الإلكتروني
- راجع كل عقدة تقويم جوجل في تدفق العمل
- استبدل أي عناوين بريد إلكتروني مشفرة بعناوينك الخاصة
- يمكن توسيعه لدعم تقاويم متعددة

## 🤝 المساهمة

يمكن توسيع تدفق العمل هذا بـ:
- دعم تقاويم متعددة
- التكامل مع منصات مراسلة أخرى
- أنماط أحداث متكررة متقدمة
- حجز قاعات الاجتماعات
- إدارة الحضور
- إشعارات البريد الإلكتروني

## 📝 الترخيص

هذا المشروع مقدم كما هو للاستخدام التعليمي والشخصي.

## ⚠️ ملاحظات أمنية مهمة

- **بالغ الأهمية**: استبدل جميع عناوين البريد الإلكتروني ونقاط النهاية بعناوينك الخاصة قبل الاستخدام
- اختبر دائماً في بيئة غير إنتاجية أولاً
- **لا تشارك أبداً** مفاتيح API أو بيانات الاعتماد أو ملفات تدفق العمل علناً
- راجع جميع العقد للمعلومات الشخصية المشفرة قبل النشر
- تأكد من الأمان المناسب لمفاتيح API وبيانات الاعتماد
- يتطلب تدفق العمل مثيل n8n نشط للعمل
- نسخ الصوت يتطلب حصة API جوجل جيميني
- **أعد إعداد خادم MCP الخاص بك** - لا تستخدم نقاط النهاية النموذجية في الإنتاج

---

**مبني بـ ❤️ باستخدام n8n وجوجل جيميني وتيليجرام**